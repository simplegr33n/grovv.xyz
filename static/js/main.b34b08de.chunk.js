(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(45),s=a.n(l),o=(a(64),a(3)),r=a(4),c=a(6),d=a(5),m=a(7),u=(a(25),a(23)),g=a.n(u),h=(a(111),a(115),{apiKey:"AIzaSyBJuUseKfGN_MjNEWg722WY1FsO2xZ1AuE",authDomain:"grovv-22cbd.firebaseapp.com",databaseURL:"https://grovv-22cbd.firebaseio.com",projectId:"grovv-22cbd",storageBucket:"grovv-22cbd.appspot.com",messagingSenderId:"30272449560"}),v=function e(){Object(o.a)(this,e),g.a.apps.length||g.a.initializeApp(h),this.db=g.a.database(),this.auth=g.a.auth()},f=a(58),p=a.n(f),b=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleUsernameChange=function(e){a.setState({username:e.target.value})},a.handlePasswordChange=function(e){a.setState({password:e.target.value})},a.handleSubmit=function(){console.log("SignIn submit pressed");var e=a.state.username,t=a.state.password;console.log("SignUp submit pressed - username ".concat(e)),a.validateEmail(e)?(a.setState({username:"",password:""}),a.hideSigninFields(),a.firebase.auth.signInWithEmailAndPassword(e,t).catch(function(e){var t=e.code,a=e.message;console.log("".concat(t,": ").concat(a)),alert("".concat(t,": ").concat(a)),this.setState({SHOWFIELDS:!0})}),console.log("username ".concat(e," - logged in")),a.props.signIn("songwall")):alert("Bad email me thinks :(")},a.hideSigninFields=function(){a.setState({SHOWFIELDS:!1})},a.showSigninFields=function(){a.setState({SHOWFIELDS:!0})},a.state={username:"",password:"",SHOWFIELDS:!1},a.firebase=new v,a.firebase.auth.onAuthStateChanged(function(e){e||a.showSigninFields()}),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"validateEmail",value:function(e){return/^\S+@\S+$/.test(String(e).toLowerCase())}},{key:"validatePassword",value:function(e){return/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/.test(String(e))}},{key:"render",value:function(){return this.state.SHOWFIELDS?i.a.createElement("div",{id:"signin-div"},i.a.createElement("h3",null,"Sign In"),i.a.createElement("div",null,"Email:",i.a.createElement("input",{id:"signin-username",value:this.state.username,onChange:this.handleUsernameChange})),i.a.createElement("div",null,"Password:",i.a.createElement("input",{type:"password",id:"signin-password",value:this.state.password,onChange:this.handlePasswordChange})),i.a.createElement("div",null,i.a.createElement("button",{id:"submit-signin-btn",onClick:this.handleSubmit}," Sign in! "))):i.a.createElement("div",null,"One Moment...")}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).hideSignupFields=function(){a.setState({SHOWFIELDS:!1})},a.showSignupFields=function(){a.setState({SHOWFIELDS:!0})},a.handleUsernameChange=function(e){a.setState({username:e.target.value})},a.handlePasswordChange=function(e){a.setState({password:e.target.value})},a.handleSubmit=function(){var e=a.state.username,t=a.state.password;return console.log("SignUp submit pressed - username ".concat(e)),a.validateEmail(e)?a.validatePassword(t)?void a.firebase.auth.createUserWithEmailAndPassword(e,t).catch(function(e){var t=e.code,a=e.message;console.log("".concat(t,": ").concat(a))}):(alert("Bad password. Must be 7-15 characters with at least 1 numeric digit and a special character."),void a.setState({password:""})):(alert("Bad email me thinks :("),void a.setState({username:""}))},a.handleGotoSignIn=function(){a.props.gotoSignIn("signin"),console.log("Goto signin pressed")},a.state={username:"",password:"",SHOWFIELDS:!1},a.firebase=new v,a.firebase.auth.onAuthStateChanged(function(e){e?a.postUserToFirebase(e.uid,e.email):a.showSignupFields()}),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"postUserToFirebase",value:function(e,t){var a=(new Date).getTime(),n={uid:e,username:t,createdAt:a,updatedAt:a},i={};return i["/users/"+e]=n,this.firebase.db.ref().update(i)}},{key:"validateEmail",value:function(e){return/^\S+@\S+$/.test(String(e).toLowerCase())}},{key:"validatePassword",value:function(e){return/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/.test(String(e))}},{key:"render",value:function(){return this.state.SHOWFIELDS?i.a.createElement("div",{id:"signup-div"},i.a.createElement("h3",null,"Sign Up"),i.a.createElement("div",null,"Email:",i.a.createElement("input",{id:"signup-username",value:this.state.username,onChange:this.handleUsernameChange})),i.a.createElement("div",null,"Password:",i.a.createElement("input",{type:"password",id:"signup-password",value:this.state.password,onChange:this.handlePasswordChange})),i.a.createElement("div",null,i.a.createElement("button",{id:"submit-signup-btn",onClick:this.handleSubmit}," Sign up! ")),i.a.createElement("div",null,i.a.createElement("button",{id:"goto-signin-btn",onClick:this.handleGotoSignIn}," Sign in! "))):i.a.createElement("div",null,"One Moment...")}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleUsernameChange=function(e){a.setState({username:e.target.value})},a.handleSubmit=function(){},a.handleChangePassword=function(){alert("Sorry - request from reset admin for now.")},a.state={username:""},a.firebase=new v,a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"Profile-Page"},i.a.createElement("div",{id:"Profile-Page-Header"},i.a.createElement("div",null,"Email: ",i.a.createElement("b",null,this.props.username)),i.a.createElement("button",{onClick:this.handleChangePassword},"Change Password")))}}]),t}(n.Component),E=(a(117),a(24)),S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={width:40,height:40,x:150,y:200,URLS:a.props.urls},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"Resizeable-Console-Page"},i.a.createElement("div",{className:"Resizeable-Row"},i.a.createElement("div",{className:"Resizeable-Plotly"},i.a.createElement(E.a,{className:"RND-Plotly",default:{x:0,y:0,width:"100%",height:"100%"}},i.a.createElement("div",{className:"moveHandle"},"\u2904"),i.a.createElement("object",{className:"Rnd-View",style:{zIndex:this.state.zPlotly},type:"text/html",data:this.props.urls.plotly,width:"100%",height:"100%","aria-label":"plotly"}))),i.a.createElement("div",{className:"Resizeable-Cam"},i.a.createElement(E.a,{className:"RND-Cam",default:{x:0,y:0,width:"100%",height:"100%"}},i.a.createElement("div",{className:"moveHandle"},"\u2904"),i.a.createElement("object",{className:"Rnd-View",style:{zIndex:this.state.zLivecam},type:"text/html",data:this.props.urls.livecam,width:"100%",height:"100%","aria-label":"live cam"})))),i.a.createElement("div",{className:"Resizeable-Row"},i.a.createElement("div",{className:"Resizeable-Plotly"},i.a.createElement(E.a,{className:"RND-Plotly",default:{x:0,y:0,width:"100%",height:"100%"}},i.a.createElement("div",{className:"moveHandle"},"\u2904"),i.a.createElement("object",{className:"Rnd-View",style:{zIndex:this.state.zVeggerPlotly},type:"text/html",data:this.props.urls.vegger_plotly,width:"100%",height:"100%","aria-label":"vegger plotly"}))),i.a.createElement("div",{className:"Resizeable-Cam"},i.a.createElement(E.a,{className:"RND-Cam",default:{x:0,y:0,width:"100%",height:"100%"}},i.a.createElement("div",{className:"moveHandle"},"\u2904"),i.a.createElement("object",{className:"Rnd-View-Vegger",style:{zIndex:this.state.zVeggerLivecam},type:"text/html",data:this.props.urls.vegger_livecam,width:"100%",height:"100%","aria-label":"vegger live cam"})))))}}]),t}(n.Component),C="#91eebb",L="#FFA500",z="#FF0000",R=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).watchSensors=function(){var e=a.firebase.db.ref().child("sensor_data");e.child("flower").limitToLast(1).on("child_added",function(e){console.log("new flower data key: "+e.key),a.followFlower(e.key)},function(e){console.log("sensorwatch flower failed: "+e.code)}),e.child("vegger").limitToLast(1).on("child_added",function(e){console.log("new vegger data key: "+e.key),a.followVegger(e.key)},function(e){console.log("sensorwatch vegger failed: "+e.code)})},a.followFlower=function(e){a.firebase.db.ref().child("sensor_data").child("flower").child(e).on("child_added",function(e){var t=Math.round(10*e.val().cTemp)/10,n=Math.round(10*e.val().humidity)/10;a.flowerTempRef.current.style.background=t>20&&t<27?C:t<19||t>28?z:L,a.flowerHumidityRef.current.style.background=n>30&&n<43?C:n<27||n>45?z:L,a.setState({sFlowerTemp:t,sFlowerHumidity:n})},function(e){console.log("follow flower failed: "+e.code)})},a.followVegger=function(e){a.firebase.db.ref().child("sensor_data").child("vegger").child(e).on("child_added",function(e){var t=Math.round(10*e.val().cTemp)/10,n=Math.round(10*e.val().humidity)/10;a.veggerTempRef.current.style.background=t>22&&t<29?C:t<20||t>30?z:L,a.veggerHumidityRef.current.style.background=n>40&&n<80?C:n<35||n>85?z:L,a.setState({sVeggerTemp:t,sVeggerHumidity:n})},function(e){console.log("follow vegger failed: "+e.code)})},a.getUsername=function(){a.firebase.db.ref().child("users").child(a.state.UID).on("value",function(e){a.setState({username:e.val().username})},function(e){console.log("The username read failed: "+e.code)})},a.getUrls=function(){a.firebase.db.ref().child("users").child(a.state.UID).child("urls").on("value",function(e){a.setState({URL_livecam:e.val().livecam,URL_plotly:e.val().plotly,URL_vegger_livecam:e.val().vegger_livecam,URL_vegger_plotly:e.val().vegger_plotly,urls:e.val(),mainContent:"resizeview"})},function(e){console.log("The url read failed: "+e.code)})},a.handleSignOut=function(){a.setState({UID:null,URL_livecam:null,URL_plotly:null}),a.firebase.auth.signOut().then(function(){console.log("signed out")}).catch(function(e){console.log("Error signing out: ".concat(e))})},a.handleSignIn=function(){},a.setMainContent=function(e){a.setState({mainContent:e})},a.openPlotly=function(){"maincontent"!==a.state.mainContent&&a.setState({mainContent:"maincontent"}),a.setState({zPlotly:1,zLivecam:0,zVeggerLivecam:0,zVeggerPlotly:0})},a.openLiveCam=function(){"maincontent"!==a.state.mainContent&&a.setState({mainContent:"maincontent"}),a.setState({zPlotly:0,zLivecam:1,zVeggerLivecam:0,zVeggerPlotly:0})},a.openVeggerPlotly=function(){"maincontent"!==a.state.mainContent&&a.setState({mainContent:"maincontent"}),a.setState({zPlotly:0,zLivecam:0,zVeggerLivecam:0,zVeggerPlotly:1})},a.openVeggerLiveCam=function(){"maincontent"!==a.state.mainContent&&a.setState({mainContent:"maincontent"}),a.setState({zPlotly:0,zLivecam:0,zVeggerLivecam:1,zVeggerPlotly:0})},a.openEditProfile=function(){"editprofile"!==a.state.mainContent&&a.setState({mainContent:"editprofile"})},a.openResizeView=function(){"resizeview"!==a.state.mainContent&&a.setState({mainContent:"resizeview"})},a.state={mainContent:"signin",UID:null,username:"",URL_livecam:null,URL_plotly:null,URL_vegger_livecam:null,URL_vegger_plotly:null,zPlotly:0,zLivecam:0,zVeggerLivecam:0,zVeggerPlotly:0,sFlowerTemp:"",sFlowerHumidity:"",sVeggerTemp:"",sVeggerHumidity:""},a.firebase=new v,a.firebase.auth.onAuthStateChanged(function(e){e&&(a.setState({UID:e.uid}),a.getUrls(),a.getUsername(),a.watchSensors())}),a.flowerTempRef=i.a.createRef(),a.flowerHumidityRef=i.a.createRef(),a.veggerTempRef=i.a.createRef(),a.veggerHumidityRef=i.a.createRef(),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-body"},i.a.createElement("div",{id:"App-Inner-Body"},i.a.createElement("div",{id:"App-Body-Content"},i.a.createElement("div",{id:"Main-Left"},i.a.createElement("div",{id:"Home-Div"},i.a.createElement("img",{src:p.a,className:"Grovv-logo",alt:"grovv logo"})),function(){if(e.state.UID)return i.a.createElement("div",{id:"Main-Left-Menu"},i.a.createElement("div",{id:"Footer-Btns"},i.a.createElement("button",{id:"Profile-Btn",onClick:e.openEditProfile},"Profile"),i.a.createElement("button",{id:"Logout-Btn",onClick:e.handleSignOut},"Logout")),i.a.createElement("div",{className:"QuickTemp-Row"},i.a.createElement("button",{className:"Sensor-Area",onClick:e.ll33},"GG"),i.a.createElement("button",{className:"Temp-Guage",ref:e.flowerTempRef,onClick:e.ll33},e.state.sFlowerTemp,"\xb0C"),i.a.createElement("button",{className:"Humid-Guage",ref:e.flowerHumidityRef,onClick:e.ll33},e.state.sFlowerHumidity,"%")),i.a.createElement("div",{className:"QuickTemp-Row"},i.a.createElement("button",{className:"Sensor-Area",onClick:e.ll33},"VG"),i.a.createElement("button",{className:"Temp-Guage",ref:e.veggerTempRef,onClick:e.ll33},e.state.sVeggerTemp,"\xb0C"),i.a.createElement("button",{className:"Humid-Guage",ref:e.veggerHumidityRef,onClick:e.ll33},e.state.sVeggerHumidity,"%")),i.a.createElement("button",{className:"Left-Menu-Btn",onClick:e.openResizeView},"MULTI"),i.a.createElement("button",{className:"Left-Menu-Btn",onClick:e.openLiveCam},"GanjaGrove Live"),i.a.createElement("button",{className:"Left-Menu-Btn",onClick:e.openPlotly},"GanjaGrove Plotly"),i.a.createElement("button",{className:"Left-Menu-Btn",onClick:e.openVeggerLiveCam},"Vegger Live"),i.a.createElement("button",{className:"Left-Menu-Btn",onClick:e.openVeggerPlotly},"Vegger Plotly"))}()),function(){if(e.state.UID)switch(e.state.mainContent){case"editprofile":return i.a.createElement(y,{UID:e.state.UID,username:e.state.username});case"resizeview":return i.a.createElement(S,{urls:e.state.urls});case"maincontent":return i.a.createElement("div",{id:"Main-Content"},i.a.createElement("object",{className:"Site-View-Update",style:{zIndex:e.state.zPlotly},type:"text/html",data:e.state.URL_plotly,width:"100%",height:"100%","aria-label":"plotly"}),i.a.createElement("object",{className:"Site-View-Update",style:{zIndex:e.state.zLivecam},type:"text/html",data:e.state.URL_livecam,width:"100%",height:"100%","aria-label":"live cam"}),i.a.createElement("object",{className:"Site-View-Update",style:{zIndex:e.state.zVeggerPlotly},type:"text/html",data:e.state.URL_vegger_plotly,width:"100%",height:"100%","aria-label":"vegger plotly"}),i.a.createElement("object",{className:"Site-View-Update",style:{zIndex:e.state.zVeggerLivecam},type:"text/html",data:e.state.URL_vegger_livecam,width:"100%",height:"100%","aria-label":"vegger live cam"}))}else switch(e.state.mainContent){case"signin":return i.a.createElement(b,{gotoSignUp:e.setMainContent,signIn:e.handleSignIn});case"signup":return i.a.createElement(w,{gotoSignIn:e.setMainContent});default:return i.a.createElement(b,{gotoSignUp:e.setMainContent,signIn:e.handleSignIn})}}()))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},25:function(e,t,a){},58:function(e,t,a){e.exports=a.p+"static/media/corner-logo.5ece3763.png"},59:function(e,t,a){e.exports=a(119)},64:function(e,t,a){}},[[59,1,2]]]);
//# sourceMappingURL=main.b34b08de.chunk.js.map