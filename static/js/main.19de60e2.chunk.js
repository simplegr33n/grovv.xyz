(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){},225:function(e,t,a){e.exports=a(468)},230:function(e,t,a){},468:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(41),o=a.n(i),l=(a(230),a(6)),s=a(7),c=a(9),u=a(8),m=a(10),d=(a(18),a(55)),p=a.n(d),h=(a(277),a(281),a(469),{apiKey:"AIzaSyBJuUseKfGN_MjNEWg722WY1FsO2xZ1AuE",authDomain:"grovv-22cbd.firebaseapp.com",databaseURL:"https://grovv-22cbd.firebaseio.com",projectId:"grovv-22cbd",storageBucket:"grovv-22cbd.appspot.com",messagingSenderId:"30272449560"}),g=function e(){Object(l.a)(this,e),p.a.apps.length||p.a.initializeApp(h),this.db=p.a.database(),this.auth=p.a.auth(),this.storage=p.a.storage()},f=a(12),v=a.n(f),E=a(16),w=function(){function e(){Object(l.a)(this,e),this.firebase=new g}return Object(s.a)(e,[{key:"getLiveData",value:function(){var e=Object(E.a)(v.a.mark(function e(t,a){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.firebase.db.ref().child("users").child("wR4QKyZ77mho1fL0FQWSMBQ170S2").child("grows").child("-LdG6gTCNZxfu1wU5Xvx").child("sensors_live").child(t).on("value",function(e){a(e.val())},function(e){console.log("follow "+t+" live failed: "+e.code)});case 2:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getLiveGrowDatas",value:function(){var e=Object(E.a)(v.a.mark(function e(t,a){var n=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:["flower","vegger"].forEach(function(e){n.firebase.db.ref().child("users").child("wR4QKyZ77mho1fL0FQWSMBQ170S2").child("grows").child("-LdG6gTCNZxfu1wU5Xvx").child("sensors_live").child(e).on("value",function(t){a(e,t.val())},function(t){console.log("follow "+e+" live failed: "+t.code)})});case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getThreeDays",value:function(){var e=Object(E.a)(v.a.mark(function e(t,a){var n,r,i,o,l,s,c,u,m,d;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.firebase.db.ref().child("sensor_data").child(t),r=new Date,i=r.getFullYear().toString(),(o=(r.getMonth()+1).toString()).length<2&&(o="0"+o),l=[],s=null,(c=r.getDate())-2>=1&&((s=c-2).toString().length<2&&(s="0"+s),l[l.length]=s),c-1>=1&&((s=c-1).toString().length<2&&(s="0"+s),l[l.length]=s),c.toString().length<2&&(c="0"+c),l[l.length]=c,u=0,m=[],d=[],l.forEach(function(e){e.toString()!==c.toString()&&n.child(i).child(o).child(e).on("value",function(r){d.includes(e)||(d[d.length]=e,r.forEach(function(e){e.forEach(function(e){if(++u%10===0||0===u){var t=e.val(),a=new Date(t.time).getTime();t.time=a,m[m.length]=t}})}),d.length===l.length-1&&n.child(i).child(o).child(c).on("value",function(e){console.log("DAYALOOUYA! deeep"+c);var n=[];e.forEach(function(e){e.forEach(function(e){if(++u%10===0||0===u){var t=e.val(),a=new Date(t.time).getTime();t.time=a,n[n.length]=t}})}),n.sort(function(e,t){return e.time>t.time?1:-1}),console.log("DBHELPER Test 3-day Datapoints to return..."+t),console.log(n.length),console.log(n[0]),console.log(n[n.length-1]);var r=m.concat(n);r.sort(function(e,t){return e.time>t.time?1:-1}),a(r)}))})});case 16:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getBoxHour",value:function(){var e=Object(E.a)(v.a.mark(function e(t,a){var n,r,i,o,l,s,c,u,m,d;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.firebase.db.ref().child("sensor_data").child(t),r=new Date,i=r.getFullYear().toString(),(o=(r.getMonth()+1).toString()).length<2&&(o="0"+o),l=r.getDate().toString(),s=r.getHours(),c=[],u=null,s-1>=0&&((u=s-1).toString().length<2&&(u="0"+u),c[c.length]=u),s.toString().length<2&&(s="0"+s),c[c.length]=s,m=[],d=[],c.forEach(function(e){e.toString()!==s.toString()&&n.child(i).child(o).child(l).child(e).on("value",function(t){if(!d.includes(e)&&(d[d.length]=e,t.forEach(function(e){var t=e.val(),a=new Date(t.time).getTime();t.time=a,m[m.length]=t}),d.length===c.length-1)){var r=[];n.child(i).child(o).child(l).child(s).on("value",function(e){e.forEach(function(e){var t=e.val(),a=new Date(t.time).getTime();t.time=a,r[r.length]=t,console.log("Test last hour Datapoints to render..."+r.length),console.log(r[r.length-1])});var t=m.concat(r);t.sort(function(e,t){return e.time>t.time?1:-1}),a(t)})}})});case 15:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"watchGrowConfig",value:function(e){this.firebase.db.ref().child("grow").child("-LdG6gTCNZxfu1wU5Xvx").child("config").on("value",function(t){e({temp_min:t.val().temp_min,temp_max:t.val().temp_max,temp_hyst:t.val().temp_hyst,fan_min:t.val().fan_min,fan_max:t.val().fan_max,humidity_min:t.val().humidity_min,humidity_max:t.val().humidity_max,humidity_hyst:t.val().humidity_hyst,humidifier_min:t.val().humidifier_min,humidifier_max:t.val().humidifier_max})},function(e){console.log("watch config failed: "+e.code)})}},{key:"setGrowConfig",value:function(e){this.firebase.db.ref().child("grow").child("-LdG6gTCNZxfu1wU5Xvx").child("config").set(e)}},{key:"getUserGrows",value:function(e){var t=this;this.firebase.db.ref().child("users").child("wR4QKyZ77mho1fL0FQWSMBQ170S2").child("grows").on("value",function(a){var n=[];console.log("TODO: remove filter."),a.forEach(function(e){e.val().sensors_live||(n[e.key]=e.val())});for(var r=[],i=Object.keys(n),o=0;o<i.length;o++){var l=i[o];t.firebase.db.ref().child("grows").child(l).on("value",function(t){r.includes(t.val())||(r[r.length]=t.val()),r.sort(function(e,t){return e.updatedAt<t.updatedAt?1:-1}),e(r)},function(e){console.log("watch user grows grow failed: "+e.code)})}},function(e){console.log("watch user grows failed: "+e.code)})}},{key:"getLinkedJournals",value:function(e,t,a){this.firebase.db.ref().child("users").child("wR4QKyZ77mho1fL0FQWSMBQ170S2").child("journals").on("value",function(e){var n=[];e.forEach(function(e){t&&Object.keys(t).forEach(function(t){e.val().id===t&&n.push(e.val())})}),n.sort(function(e,t){return e.updatedAt<t.updatedAt?1:-1}),a(n)},function(e){console.log("GrowDetails watch user journals failed: "+e.code)})}},{key:"getUserJournals",value:function(e){this.firebase.db.ref().child("users").child("wR4QKyZ77mho1fL0FQWSMBQ170S2").child("journals").on("value",function(t){var a=[];t.forEach(function(e){a.push(e.val())}),console.log("Journals List:"),console.log(a),a.sort(function(e,t){return e.updatedAt<t.updatedAt?1:-1}),e(a)},function(e){console.log("watch user journals failed: "+e.code)})}},{key:"watchJournalEntries",value:function(e,t){var a=this.firebase.db.ref().child("journals").child(e).child("entries");console.log("watchin... "+e),a.on("value",function(e){var a=[];e.forEach(function(e){a.push(e.val())}),a.sort(function(e,t){return e.datetime_true>t.datetime_true?1:-1});var n=[];a.forEach(function(e){n.includes(e.datetime_short)||(n[n.length]=e.datetime_short)});var r=[];n.forEach(function(e){var t=[];a.forEach(function(a){e===a.datetime_short&&(t[t.length]=a)}),r[r.length]=t}),t(a,r)},function(e){console.log("follow journal failed: "+e.code)})}},{key:"createJournal",value:function(){var e=Object(E.a)(v.a.mark(function e(t,a){var n,r,i,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.firebase.db.ref().child("journals").push(),r=this.firebase.db.ref().child("users").child("wR4QKyZ77mho1fL0FQWSMBQ170S2").child("journals").child(n.key),i=n.key,o=new Date,n.set({id:i,name:t,updatedAt:o.getTime(),createdAt:o.getTime(),previewImage:"https://via.placeholder.com/160x120?text=NO+PREVIEW"}),r.set({id:i,name:t,updatedAt:o.getTime(),createdAt:o.getTime(),previewImage:"https://via.placeholder.com/160x120?text=NO+PREVIEW"}),a(i);case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"saveJournalEntry",value:function(){var e=Object(E.a)(v.a.mark(function e(t,a,n,r,i,o,l,s,c){var u,m,d,p,h,g,f,E;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u=this.firebase.db.ref().child("journals").child(t).child("entries"),m=(new Date).getTime(),2===(p=(d=n).getMonth()+1+"-").length&&(p="0"+p),h=p+d.getDate()+"-"+d.getFullYear(),u.child(a).set({id:a,title:r,published:!0,content:i,grow_stage:o,datetime_post:l.getTime(),datetime_edit:m,datetime_true:n.getTime(),datetime_short:h,journal_id:t,images:s}),console.log("set journal entry "+a),g=this.firebase.db.ref().child("journals").child(t),f=this.firebase.db.ref().child("users").child("wR4QKyZ77mho1fL0FQWSMBQ170S2").child("journals").child(t),E=new Date,g.child("updatedAt").set(E.getTime()),f.child("updatedAt").set(E.getTime()),c(a);case 14:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,i,o,l,s,c){return e.apply(this,arguments)}}()},{key:"handleImageUpload",value:function(){var e=Object(E.a)(v.a.mark(function e(t,a){var n,r,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.firebase.storage.ref().child("journals").child("-LdG6gTCNZxfu1wU5Xvx/"),console.log("filename:"+t.name),r=new Date,i={contentType:t.type},n.child(r.getTime()+t.name).put(t,i).then(function(e){return e.ref.getDownloadURL()}).then(function(e){var t=e.split("%2F"),n=t[0]+"%2F"+t[1]+"%2Fthumb_"+t[2];a(e,n)});case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleImageDelete",value:function(e){this.firebase.storage.refFromURL(e).delete().then(function(){console.log("deleted "+e+"successfully :)")}).catch(function(t){console.log("deleted "+e+"error :(")})}}]),e}(),D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleUsernameChange=function(e){a.setState({username:e.target.value})},a.handlePasswordChange=function(e){a.setState({password:e.target.value})},a.handleSubmit=function(){console.log("SignIn submit pressed");var e=a.state.username,t=a.state.password;console.log("SignUp submit pressed - username ".concat(e)),a.validateEmail(e)?(a.setState({username:"",password:""}),a.hideSigninFields(),a.firebase.auth.signInWithEmailAndPassword(e,t).catch(function(e){var t=e.code,a=e.message;console.log("".concat(t,": ").concat(a)),alert("".concat(t,": ").concat(a)),this.setState({SHOWFIELDS:!0})}),console.log("username ".concat(e," - logged in"))):alert("Bad email me thinks :(")},a.hideSigninFields=function(){a.setState({SHOWFIELDS:!1})},a.showSigninFields=function(){a.setState({SHOWFIELDS:!0})},a.state={username:"",password:"",SHOWFIELDS:!1},a.firebase=new g,a.firebase.auth.onAuthStateChanged(function(e){e||a.showSigninFields()}),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"validateEmail",value:function(e){return/^\S+@\S+$/.test(String(e).toLowerCase())}},{key:"validatePassword",value:function(e){return/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/.test(String(e))}},{key:"render",value:function(){return this.state.SHOWFIELDS?r.a.createElement("div",{id:"signin-div"},r.a.createElement("h3",null,"Sign In"),r.a.createElement("div",null,"Email:",r.a.createElement("input",{id:"signin-username",value:this.state.username,onChange:this.handleUsernameChange})),r.a.createElement("div",null,"Password:",r.a.createElement("input",{type:"password",id:"signin-password",value:this.state.password,onChange:this.handlePasswordChange})),r.a.createElement("div",null,r.a.createElement("button",{id:"submit-signin-btn",onClick:this.handleSubmit}," Sign in! "))):r.a.createElement("div",null,"One Moment...")}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).hideSignupFields=function(){a.setState({SHOWFIELDS:!1})},a.showSignupFields=function(){a.setState({SHOWFIELDS:!0})},a.handleUsernameChange=function(e){a.setState({username:e.target.value})},a.handlePasswordChange=function(e){a.setState({password:e.target.value})},a.handleSubmit=function(){var e=a.state.username,t=a.state.password;return console.log("SignUp submit pressed - username ".concat(e)),a.validateEmail(e)?a.validatePassword(t)?void a.firebase.auth.createUserWithEmailAndPassword(e,t).catch(function(e){var t=e.code,a=e.message;console.log("".concat(t,": ").concat(a))}):(alert("Bad password. Must be 7-15 characters with at least 1 numeric digit and a special character."),void a.setState({password:""})):(alert("Bad email me thinks :("),void a.setState({username:""}))},a.handleGotoSignIn=function(){a.props.gotoSignIn("signin"),console.log("Goto signin pressed")},a.state={username:"",password:"",SHOWFIELDS:!1},a.firebase=new g,a.firebase.auth.onAuthStateChanged(function(e){e?a.postUserToFirebase(e.uid,e.email):a.showSignupFields()}),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"postUserToFirebase",value:function(e,t){var a=(new Date).getTime(),n={uid:e,username:t,createdAt:a,updatedAt:a},r={};return r["/users/"+e]=n,this.firebase.db.ref().update(r)}},{key:"validateEmail",value:function(e){return/^\S+@\S+$/.test(String(e).toLowerCase())}},{key:"validatePassword",value:function(e){return/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/.test(String(e))}},{key:"render",value:function(){return this.state.SHOWFIELDS?r.a.createElement("div",{id:"signup-div"},r.a.createElement("h3",null,"Sign Up"),r.a.createElement("div",null,"Email:",r.a.createElement("input",{id:"signup-username",value:this.state.username,onChange:this.handleUsernameChange})),r.a.createElement("div",null,"Password:",r.a.createElement("input",{type:"password",id:"signup-password",value:this.state.password,onChange:this.handlePasswordChange})),r.a.createElement("div",null,r.a.createElement("button",{id:"submit-signup-btn",onClick:this.handleSubmit}," Sign up! ")),r.a.createElement("div",null,r.a.createElement("button",{id:"goto-signin-btn",onClick:this.handleGotoSignIn}," Sign in! "))):r.a.createElement("div",null,"One Moment...")}}]),t}(n.Component),b=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"Chart-Page"},r.a.createElement("iframe",{id:"Food-Chart",title:"FoodChart",src:"https://docs.google.com/spreadsheets/d/e/2PACX-1vQiIvBEmBjgIFQ_5vSAZJrzVTepyDpyDYeNrOrfqWOuraA_MHZE_sRLyGkcARlIYR-INkuwq667Seqe/pubhtml?widget=true&headers=false"}))}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).saveConfig=function(){a.dbHelper.setGrowConfig({temp_min:a.state.temp_min,temp_max:a.state.temp_max,temp_hyst:a.state.temp_hyst,fan_min:a.state.fan_min,fan_max:a.state.fan_max,humidity_min:a.state.humidity_min,humidity_max:a.state.humidity_max,humidity_hyst:a.state.humidity_hyst,humidifier_min:a.state.humidifier_min,humidifier_max:a.state.humidifier_max})},a.watchGrowConfig=function(){var e=Object(E.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.dbHelper.watchGrowConfig(t);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","caught "+e.t0);case 9:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}(),a.setFetchedConfig=function(e){a.setState({temp_min:e.temp_min,temp_max:e.temp_max,temp_hyst:e.temp_hyst,fan_min:e.fan_min,fan_max:e.fan_max,humidity_min:e.humidity_min,humidity_max:e.humidity_max,humidity_hyst:e.humidity_hyst,humidifier_min:e.humidifier_min,humidifier_max:e.humidifier_max})},a.handleTempMinChange=function(e){a.setState({temp_min:e.target.value})},a.handleTempMaxChange=function(e){a.setState({temp_max:e.target.value})},a.handleTempHystChange=function(e){a.setState({temp_hyst:e.target.value})},a.handleFanMinChange=function(e){a.setState({fan_min:e.target.value})},a.handleFanMaxChange=function(e){a.setState({fan_max:e.target.value})},a.handleHumidityMinChange=function(e){a.setState({humidity_min:e.target.value})},a.handleHumidityMaxChange=function(e){a.setState({humidity_max:e.target.value})},a.handleHumidityHystChange=function(e){a.setState({humidity_hyst:e.target.value})},a.handleHumidifierMinChange=function(e){a.setState({humidifier_min:e.target.value})},a.handleHumidifierMaxChange=function(e){a.setState({humidifier_max:e.target.value})},a.state={temp_min:"",temp_max:"",temp_hyst:"",fan_min:"",fan_max:"",humidity_min:"",humidity_max:"",humidity_hyst:"",humidifier_min:"",humidifier_max:""},a.dbHelper=new w,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._ismounted=!0,this.watchConfig=this.watchGrowConfig(this.setFetchedConfig)}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"render",value:function(){return r.a.createElement("div",{id:"Config-Page"},r.a.createElement("h1",null,"Grow Config"),r.a.createElement("div",{id:"Config-Temp-Field"},r.a.createElement("h2",null,"TEMPERATURE"),r.a.createElement("div",{id:"Config-Temp-Min-Max"},r.a.createElement("div",null,"Min:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"temp-min",value:this.state.temp_min,onChange:this.handleTempMinChange}),"\xb0C"),r.a.createElement("div",null,"Max:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"temp-max",value:this.state.temp_max,onChange:this.handleTempMaxChange}),"\xb0C"),r.a.createElement("div",null,"Hyst:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"temp-hyst",value:this.state.temp_hyst,onChange:this.handleTempHystChange}),"\u0394\xb0C")),r.a.createElement("h3",null,"FAN POWER"),r.a.createElement("div",{id:"Config-Fan-Min-Max"},r.a.createElement("div",null,"Min:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"fan-min",value:this.state.fan_min,onChange:this.handleFanMinChange}),"%"),r.a.createElement("div",null,"Max:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"fan-max",value:this.state.fan_max,onChange:this.handleFanMaxChange}),"%"))),r.a.createElement("div",{id:"Config-Humidity-Field"},r.a.createElement("h2",null,"HUMIDITY"),r.a.createElement("div",{id:"Config-Humidity-Min-Max"},r.a.createElement("div",null,"Min:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"humidity-min",value:this.state.humidity_min,onChange:this.handleHumidityMinChange}),"% R.H."),r.a.createElement("div",null,"Max:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"humidity-max",value:this.state.humidity_max,onChange:this.handleHumidityMaxChange}),"% R.H."),r.a.createElement("div",null,"Hyst:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"humidity-hyst",value:this.state.humidity_hyst,onChange:this.handleHumidityHystChange}),"\u0394 % R.H.")),r.a.createElement("h3",null,"HUMIDIFIER POWER"),r.a.createElement("div",{id:"Config-Humidifier-Min-Max"},r.a.createElement("div",null,"Min:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"humidifier-min",value:this.state.humidifier_min,onChange:this.handleHumidifierMinChange}),"%"),r.a.createElement("div",null,"Max:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"humidifier-max",value:this.state.humidifier_max,onChange:this.handleHumidifierMaxChange}),"%"))),r.a.createElement("div",{id:"SAVE-CONFIG-BTN",onClick:this.saveConfig},"SAVE"))}}]),t}(n.Component),S=a(197),G=(a(291),a(198)),I=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleTitleChange=function(e){a.setState({title:e.target.value})},a.handleContentChange=function(e){a.setState({content:e.target.value})},a.cancelModal=function(){a.deleteAllAddedImages(),a.props.closeModal(a.state.entryID)},a.saveEntry=Object(E.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==a.state.content||0!==a.state.images.length){e.next=3;break}return alert("Needs content or images!"),e.abrupt("return");case 3:return a.setState({published:!0}),e.prev=4,e.next=7,a.dbHelper.saveJournalEntry(a.state.journalID,a.state.entryID,a.state.trueDate,a.state.title,a.state.content,a.state.growStage,a.state.postDate,a.state.images,a.closeModal);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return","caught "+e.t0);case 13:case"end":return e.stop()}},e,null,[[4,9]])})),a.closeModal=function(e){a.props.closeModal(e)},a.displayFullImage=function(){console.log("JournalAddEditModal todo")},a.handleImageUpload=function(){var e=Object(E.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.dbHelper.handleImageUpload(t,a.setImages);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","caught "+e.t0);case 9:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}(),a.setImages=function(e,t){var n=a.state.images,r=a.state.addedImages;n.push({url:e,thumb:t}),r.push({url:e,thumb:t}),a.setState({images:n,addedImages:r})},a.deleteImage=function(e){var t=e.target.dataset.value;console.log(t),console.log(a.state.images);var n=[];a.state.images.forEach(function(e){e.url.toString()===t?(a.handleImageDelete(e.url),a.handleImageDelete(e.thumb)):n.push(e)}),a.setState({images:n})},a.deleteAllAddedImages=function(){a.state.addedImages.forEach(function(e){a.handleImageDelete(e.url),a.handleImageDelete(e.thumb)})},a.handleImageDelete=function(e){a.dbHelper.handleImageDelete(e)},a.handleDateChange=function(e){a.setState({trueDate:e})},a.handleGrowStageChange=function(e){a.setState({growStage:e.target.value})},a.state={title:"",content:"",images:[],addedImages:[],journalID:a.props.journalID,postDate:new Date,trueDate:new Date,growStage:"veg",published:!1,entryID:""},a.dbHelper=new w,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=new Date(this.props.editPost.datetime_true),t=this.props.editPost.content,a=this.props.editPost.title,n=new Date(this.props.editPost.datetime_post),r=this.props.editPost.images;null!==r&&void 0!==r||(r=[]);var i=this.props.editPost.grow_stage,o=this.props.editPost.id;this.setState({title:a,content:t,trueDate:e,postDate:n,growStage:i,images:r,entryID:o,published:!0})}},{key:"onImageDrop",value:function(e){var t=this;console.log(e),e.forEach(function(e){t.handleImageUpload(e),console.log("upload "+e)})}},{key:"render",value:function(){var e=this;if(this.state.images)var t=this.state.images.map(function(t,a){return r.a.createElement("div",{className:"Temp-Image-Div"},r.a.createElement("img",{key:a,alt:"grow img","data-value":t.url,src:t.url,className:"Journal-Entry-Preview-Thumbnail",onClick:e.displayFullImage}),r.a.createElement("div",{"data-value":t.url,onClick:e.deleteImage,className:"Delete-Image-Btn"},"X"))});return r.a.createElement("div",{id:"Journal-Modal-Space"},r.a.createElement("div",{id:"Journal-Edit-Entry-Modal"},r.a.createElement("div",{id:"Journal-Edit-Topline"},r.a.createElement(S.a,{id:"journal-edit-datepicker",selected:this.state.trueDate,onChange:this.handleDateChange}),r.a.createElement("select",{id:"journal-edit-grow-stage",onChange:this.handleGrowStageChange,value:this.state.growStage},r.a.createElement("option",{value:"post"},"Post"),r.a.createElement("option",{value:"flower"},"Flower"),r.a.createElement("option",{value:"veg"},"Veg"),r.a.createElement("option",{value:"seedling"},"Seedling"),r.a.createElement("option",{value:"pre"},"Pre")),r.a.createElement("input",{className:"journal-modal-edit-title",placeholder:"enter title...",value:this.state.title,onChange:this.handleTitleChange})),r.a.createElement("textarea",{className:"journal-modal-edit-body",placeholder:"enter body content...",value:this.state.content,onChange:this.handleContentChange}),r.a.createElement("div",{className:"journal-add-images-area"},r.a.createElement(G.a,{className:"journal-add-images-dropzone",onDrop:this.onImageDrop.bind(this),accept:"image/*",multiple:!0},function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("div",t(),r.a.createElement("input",a()),r.a.createElement("p",{id:"Image-Drop-Text"},"Try dropping some ",r.a.createElement("br",null)," images ",r.a.createElement("span",{role:"img","aria-label":"camera"},"\ud83d\udcf7")," here, ",r.a.createElement("br",null),"or click to ",r.a.createElement("br",null)," select files."))}),function(){if(t)return r.a.createElement("div",{className:"Journal-Edit-Post-Images"},t)}()),r.a.createElement("div",{id:"journal-cancel-save-btns"},r.a.createElement("button",{className:"journal-cancel-btn",onClick:this.cancelModal},"Cancel"),r.a.createElement("button",{className:"journal-save-entry-btn",onClick:this.saveEntry},"Save Entry"))))}}]),t}(n.Component),x=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).closeModal=function(){a.props.closeModal("")},a.nextImage=function(){a.state.fullSizeList.forEach(function(e,t){e!==a.state.currentImage||t<a.state.fullSizeList.length-1&&a.setState({currentImage:a.state.fullSizeList[t+1]})})},a.previousImage=function(){a.state.fullSizeList.forEach(function(e,t){e!==a.state.currentImage||t>0&&a.setState({currentImage:a.state.fullSizeList[t-1]})})},a.state={imageList:a.props.imageList,currentImage:a.props.currentFullImage,fullSizeList:[]},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){if(this.props.imageList){var e=[];this.props.imageList.forEach(function(t){e[e.length]=t.url}),this.setState({fullSizeList:e})}}},{key:"render",value:function(){return console.log("FULLIMAGE MODAL!"),console.log(this.state.imageList),console.log(this.state.currentImage),r.a.createElement("div",{id:"Full-Image-Modal-Space"},r.a.createElement("img",{id:"Full-Image-Image",alt:"full size",src:this.state.currentImage}),r.a.createElement("button",{onClick:this.closeModal,id:"Full-Image-Close-Btn"},"x"),r.a.createElement("button",{onClick:this.previousImage,id:"Full-Image-Last-Btn"},"\u2264"),r.a.createElement("button",{onClick:this.nextImage,id:"Full-Image-Next-Btn"},"\u2265"))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleJournalNameChange=function(e){a.setState({journalName:e.target.value})},a.cancelModal=function(){a.props.setJournalID(null)},a.createJournal=Object(E.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==a.state.journalName){e.next=3;break}return alert("Journal needs a name!"),e.abrupt("return");case 3:return e.prev=3,e.next=6,a.dbHelper.createJournal(a.state.journalName,a.openJournal);case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return","caught "+e.t0);case 12:case"end":return e.stop()}},e,null,[[3,8]])})),a.openJournal=function(e){a.setState({journalID:e}),a.props.setJournalID(e)},a.state={journalName:"",journalID:a.props.journalID},a.dbHelper=new w,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{id:"Journal-Modal-Space"},r.a.createElement("div",{id:"Journal-Create-Modal"},r.a.createElement("input",{className:"journal-modal-journal-name",placeholder:"enter journal name...",value:this.state.journalName,onChange:this.handleJournalNameChange}),r.a.createElement("div",{id:"journal-create-btns"},r.a.createElement("button",{className:"journal-cancel-create-btn",onClick:this.cancelModal},"Cancel"),r.a.createElement("button",{className:"journal-create-journal-btn",onClick:this.createJournal},"Create Journal"))))}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).setEntries=function(){a.props.setEntries(a.props.entries)},a.state={journalName:"",journalID:a.props.journalID,monthDayDate:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){if(this.props.entry){var e=new Date(this.props.entry.datetime_true),t=e.getMonth()+1+"-";2===t.length&&(t="0"+t);var a=t+e.getDate();this.setState({monthDayDate:a})}}},{key:"render",value:function(){var e=this,t=this.props.entry.grow_stage,a="Timeline-Dot-"+t.charAt(0).toUpperCase()+t.slice(1),n=!1;this.props.currentEntryID===this.props.entry.id&&(n=!0);var i=this.props.entry.datetime_short.split("-"),o=i[0]+"-"+i[1],l=new Date(this.props.entry.datetime_true).toDateString(),s=null;return this.props.entries[0].images&&(s=this.props.entries[0].images[0].thumb),r.a.createElement("div",null,function(){if(n)return r.a.createElement("div",{className:"Timeline-Dot-Connector"},r.a.createElement("div",{className:"Dot-Connector-Text-rotate-180"},o))}(),r.a.createElement("button",{"data-value":this.props.entries,id:a,className:"Timeline-Dot",onClick:this.setEntries},function(){if(!n)return r.a.createElement("div",{className:"Dot-Preview-rotate-180"},r.a.createElement("div",{className:"Dot-Preview-Window"},r.a.createElement("div",{className:"Dot-Preview-Date-String"},l),function(){if(s)return r.a.createElement("img",{alt:"journal preview",src:s,className:"Preview-Image-Thumbnail",onClick:e.displayFullImage})}()))}()))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).openJournal=function(){a.props.openJournal(a.props.journal)},a.state={journal:a.props.journal},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=new Date(this.props.journal.createdAt).toDateString(),t=new Date(this.props.journal.updatedAt),a=t.getHours().toString();1===a.length&&(a="0"+a);var n=t.getMinutes().toString();1===n.length&&(n="0"+n);var i=t.toDateString()+" - "+a+":"+n;return r.a.createElement("div",{className:"Journal-Box-Item","data-value":this.props.journal.id,onClick:this.openJournal},r.a.createElement("div",{className:"Journal-Box-Item-Main"},r.a.createElement("div",{className:"Journal-Box-Item-Header"},r.a.createElement("div",null,this.props.journal.name),r.a.createElement("div",{className:"Journal-Box-Created"},"updated: ",r.a.createElement("i",null,r.a.createElement("b",null,i)))),r.a.createElement("div",{className:"Journal-Box-Info"},"created: ",r.a.createElement("i",null,r.a.createElement("b",null,e)))),r.a.createElement("img",{alt:"preview",src:this.props.journal.previewImage,className:"Journal-Box-Preview-Image"}))}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).displayFullImage=function(e){a.props.displayFullImage(a.props.currentEntry.images),a.props.currentFullImage(e.target.dataset.value)},a.editEntryByID=function(e){a.props.editEntryByID(e.target.dataset.value)},a.state={},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.currentEntry&&this.state.currentEntry.id===e.currentEntry.id||this.setState({currentEntry:e.currentEntry})}},{key:"render",value:function(){var e=this,t=null;this.props.currentEntry&&this.props.currentEntry.images&&(t=this.props.currentEntry.images.map(function(t,a){return r.a.createElement("img",{key:a,alt:"grow img","data-value":t.url,src:t.thumb,className:"Journal-Entry-Thumbnail",onClick:e.displayFullImage})}));var a=null;return this.props.currentEntry&&""!==this.props.currentEntry&&(a=new Date(this.props.currentEntry.datetime_true)),r.a.createElement("div",{className:"Journal-Post-View"},r.a.createElement("div",{className:"Journal-Post-Header"},r.a.createElement("div",{className:"Journal-Post-Date"},a.toDateString()),r.a.createElement("div",{className:"Journal-Post-Title"},this.props.currentEntry.title),r.a.createElement("button",{className:"Journal-Edit-Post-Btn","data-value":this.props.currentEntry.id,onClick:this.editEntryByID},"edit \u270e")),r.a.createElement("div",{className:"Journal-Post-Content"},this.props.currentEntry.content),function(){if(t)return r.a.createElement("div",{className:"Journal-Post-Images-Wrapper"},r.a.createElement("div",{className:"Journal-Post-Images"},t))}())}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).watchEntries=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props.journalID;a.dbHelper.watchJournalEntries(e,a.setJournalEntries)},a.setJournalEntries=function(e,t){e.length>0?a.setState({currentEntry:e[e.length-1],currentEntryID:e[e.length-1].id,timelineEntries:e,timelineDots:t,displayEntries:t[t.length-1]}):a.setState({currentEntry:null,currentEntryID:null,timelineEntries:[],timelineDots:[],displayEntries:[]}),a.setEntries(t[t.length-1])},a.addTimelineEntry=function(){a.setState({displayContent:"add"})},a.editEntryByID=function(e){console.log("edit: "+e),console.log(e),a.state.timelineEntries.forEach(function(t){t.id!==e||a.setState({currentEntry:t,currentEntryID:t.id,displayContent:"edit"})})},a.openFullImageModal=function(e){a.setState({displayContent:"full-image",fullImageModalImages:e})},a.openFullImage=function(e){console.log("imageURL"),console.log(e),a.setState({currentFullImage:e})},a.closeModal=function(e){e&&""!==e?(a.setState({displayContent:"main"}),a.state.timelineEntries.forEach(function(t){t.id!==e||a.setState({currentEntry:t,currentEntryID:t.id})})):a.setState({displayContent:"main"})},a.setJournalID=function(e){if(null===e)return a.setState({displayContent:"main"}),void a.props.setJournalID(null);a.setState({displayContent:"main",journalID:e}),a.props.setJournalID(e),a.watchEntries(e)},a.setEntries=function(e){e&&a.setState({currentEntry:e[0],currentEntryID:e[0].id,displayEntries:e})},a.handleJournalChange=function(e){console.log("JOURNAL CHANGE!!!!"),console.log(e.target.value),a.setState({currentEntry:null,currentEntryID:null,displayEntries:[]}),a.props.setJournalID(e.target.value),a.watchEntries(e.target.value)},a.openCreateJournalModal=function(){a.setState({displayContent:"create-journal"})},a.openJournal=function(e){a.setState({journalID:e.id}),a.props.setJournalID(e.id),a.watchEntries(e.id)},a.state={displayContent:"main",displayEntries:[],currentEntry:null,currentEntryID:null,testContent:"",timelineEntries:[],journalID:a.props.journalID,fullImageModalImages:null,currentFullImage:null},a.dbHelper=new w,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._ismounted=!0,this.props.journalID&&this.watchEntries(this.props.journalID)}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"render",value:function(){var e=this,t="";this.props.userJournals.length>0&&(t=this.props.userJournals.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}));var a=null;this.props.userJournals&&(a=this.props.userJournals.map(function(t){return r.a.createElement("div",{key:t.id,className:"Journal-Box-Item-Container"},r.a.createElement(_,{journal:t,openJournal:e.openJournal}))}));var n=null;this.state.displayEntries&&(n=this.state.displayEntries.map(function(t){return r.a.createElement(k,{key:t.id,editEntryByID:e.editEntryByID,currentEntry:t,currentFullImage:e.openFullImage,displayFullImage:e.openFullImageModal})}));var i=null;return this.state.timelineDots&&(i=this.state.timelineDots.map(function(t){return r.a.createElement(j,{key:t[0].datetime_short,currentEntryID:e.state.currentEntryID,setEntries:e.setEntries,entry:t[0],entries:t})})),r.a.createElement("div",{id:"Journal-Page"},r.a.createElement("div",{id:"Journal-Main"},r.a.createElement("div",{id:"Grow-Journal-Main-Area"},a&&!e.props.journalID?r.a.createElement("div",{id:"Journal-Box-Area-Scroll"},r.a.createElement("div",{id:"Grow-Journal-Header-Area"},r.a.createElement("div",{id:"Grow-Journal-Header-Text"},"Grow Journals"),r.a.createElement("button",{className:"New-Journal-Btn",onClick:e.openCreateJournalModal},"+")),r.a.createElement("div",{id:"Journal-Box-Area"},a)):e.props.journalID?void 0:r.a.createElement("div",{id:"Grow-Journal-Header-Area"},r.a.createElement("div",{id:"Grow-Journal-Header-Text"},"Grow Journals"),r.a.createElement("button",{className:"New-Journal-Btn",onClick:e.openCreateJournalModal},"+")),function(){if(t&&e.props.journalID)return r.a.createElement("div",{className:"Grow-Journal-Title-Div"},r.a.createElement("select",{id:"Grow-Journal-Title-Select",onChange:e.handleJournalChange,value:e.props.journalID},t),r.a.createElement("button",{className:"New-Journal-Btn",onClick:e.openCreateJournalModal},"+"))}(),function(){if(e.props.journalID)return r.a.createElement("div",{id:"Journal-Posts-Container"},n?r.a.createElement("div",null,n):r.a.createElement("div",{className:"Journal-Post-View"},"Let's get some journal entries..."))}()),function(){if(e.props.journalID)return r.a.createElement("div",{id:"Timeline-Container"},r.a.createElement("div",{id:"Timeline-Inner-Container"},r.a.createElement("div",{id:"Timeline-Line"}),r.a.createElement("div",{id:"Timeline-Spots"},i,r.a.createElement("button",{id:"Timeline-Add-Dot",onClick:e.addTimelineEntry},"+"))))}()),function(){switch(e.state.displayContent){case"add":return r.a.createElement(I,{journalID:e.props.journalID,closeModal:e.closeModal,editPost:"new"});case"edit":return r.a.createElement(I,{journalID:e.props.journalID,closeModal:e.closeModal,editPost:e.state.currentEntry});case"full-image":return r.a.createElement(x,{closeModal:e.closeModal,imageList:e.state.fullImageModalImages,currentFullImage:e.state.currentFullImage});case"create-journal":return r.a.createElement(N,{journalID:e.props.journalID,setJournalID:e.setJournalID});case"main":default:return r.a.createElement("div",null)}}())}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={journalName:"",journalID:a.props.journalID},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=null,t=null,a=null,n=null;return this.props.liveData&&(e=this.props.liveData.cTemp,e=Math.round(10*e)/10,t=this.props.liveData.fanSpeed,a=this.props.liveData.humiPower,n=this.props.liveData.humidity,n=Math.round(10*n)/10),r.a.createElement("div",{id:"Grow-Data-Display"},function(){if(e){var t=null;return t=e>20&&e<27?"Data-Optimal-Background":e<=19&&e>28?"Data-Danger-Background":"Data-Warning-Background",r.a.createElement("div",{className:"Grow-Box-Info-Section"},r.a.createElement("div",{className:"Grow-Box-Info-Type"},"TEMP"),r.a.createElement("div",{className:"Grow-Box-Dot-Lead"},r.a.createElement("div",{className:"Grow-Box-Dot-Lead-Dots"})),r.a.createElement("div",{className:t},r.a.createElement("div",{className:"Grow-Box-Info-Data"},r.a.createElement("div",{className:"Grow-Box-Data-Raw"},e),r.a.createElement("div",{className:"Horizontal-20px-Gap"}),r.a.createElement("div",{className:"Grow-Box-Data-Unit"},"\xb0C"))))}}(),function(){if(t)return r.a.createElement("div",{className:"Grow-Box-Info-Section"},r.a.createElement("div",{className:"Grow-Box-Info-Type"},"FAN SPEED"),r.a.createElement("div",{className:"Grow-Box-Dot-Lead"},r.a.createElement("div",{className:"Grow-Box-Dot-Lead-Dots"})),r.a.createElement("div",{className:"Data-Neutral-Background"},r.a.createElement("div",{className:"Grow-Box-Info-Data"},r.a.createElement("div",{className:"Grow-Box-Data-Raw"},t),r.a.createElement("div",{className:"Horizontal-20px-Gap"}),r.a.createElement("div",{className:"Grow-Box-Data-Unit"},"%"))))}(),function(){if(n){var e=null;return e=n>30&&n<43?"Data-Optimal-Background":n<=27&&n>45?"Data-Danger-Background":"Data-Warning-Background",r.a.createElement("div",{className:"Grow-Box-Info-Section"},r.a.createElement("div",{className:"Grow-Box-Info-Type"},"HUMIDITY"),r.a.createElement("div",{className:"Grow-Box-Dot-Lead"},r.a.createElement("div",{className:"Grow-Box-Dot-Lead-Dots"})),r.a.createElement("div",{className:e},r.a.createElement("div",{className:"Grow-Box-Info-Data"},r.a.createElement("div",{className:"Grow-Box-Data-Raw"},n),r.a.createElement("div",{className:"Horizontal-20px-Gap"}),r.a.createElement("div",{className:"Grow-Box-Data-Unit"},"%RH"))))}}(),function(){if(a)return r.a.createElement("div",{className:"Grow-Box-Info-Section"},r.a.createElement("div",{className:"Grow-Box-Info-Type"},"HUMIDIFIER"),r.a.createElement("div",{className:"Grow-Box-Dot-Lead"},r.a.createElement("div",{className:"Grow-Box-Dot-Lead-Dots"})),r.a.createElement("div",{className:"Data-Neutral-Background"},r.a.createElement("div",{className:"Grow-Box-Info-Data"},r.a.createElement("div",{className:"Grow-Box-Info-Data"},r.a.createElement("div",{className:"Grow-Box-Data-Raw"},a),r.a.createElement("div",{className:"Horizontal-20px-Gap"}),r.a.createElement("div",{className:"Grow-Box-Data-Unit"},"%")))))}())}}]),t}(n.Component),M=a(17),F=a(22),T=a.n(F),J=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).componentDidUpdate=function(){a.props.growDeprecate&&a._ismounted&&a.props.growDeprecate!==a.growDeprecate&&(a.growDeprecate=a.props.growDeprecate,a.getData())},a.getData=Object(E.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.dbHelper.getBoxHour(a.props.growDeprecate,a.setData);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","caught "+e.t0);case 9:case"end":return e.stop()}},e,null,[[0,5]])})),a.setData=function(e){a._ismounted&&a.setState({data:e})},a.getGraphData=function(){},a.state={data:[]},a.dbHelper=new w,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._ismounted=!0,this.props.growDeprecate&&this._ismounted&&this.props.growDeprecate!==this.growDeprecate&&(this.growDeprecate=this.props.growDeprecate,this.getData())}},{key:"componentWillUnmount",value:function(){this._ismounted=!1,this.getGraphData=null}},{key:"renderTooltip",value:function(e){var t=e.payload;if(0!==t.length){var a=T()(e.payload[0].payload.time).fromNow(),n=null,i="#000",o=null,l="#000",s=null,c="#000",u=null,m="#000";return t.forEach(function(e){"cTemp"===e.dataKey&&(i=e.stroke,n=t[0].payload.cTemp),"fanSpeed"===e.dataKey&&(l=e.stroke,o=t[0].payload.fanSpeed),"humidity"===e.dataKey&&(c=e.stroke,s=t[0].payload.humidity),"humiPower"===e.dataKey&&(m=e.stroke,u=t[0].payload.humiPower)}),r.a.createElement("div",{className:"Grow-Details-Graph-Tooltip"},r.a.createElement("div",null,a),function(){if(n)return r.a.createElement("div",{className:"Grow-Details-Graph-Tooltip-Data",style:{color:i}},"TEMP: ",n,"\xb0C ")}(),function(){if(o)return r.a.createElement("div",{className:"Grow-Details-Graph-Tooltip-Data",style:{color:l}},"FAN-PWR: ",o,"% ")}(),function(){if(s)return r.a.createElement("div",{className:"Grow-Details-Graph-Tooltip-Data",style:{color:c}},"HUMID: ",s,"% RH ")}(),function(){if(u)return r.a.createElement("div",{className:"Grow-Details-Graph-Tooltip-Data",style:{color:m}},"HUM-PWR: ",u,"% ")}())}}},{key:"render",value:function(){var e=null;if(this.state.data[0]&&this.props.parentSize){var t=Math.floor(1*this.props.parentSize[0]),a=Math.floor(.9*this.props.parentSize[1]);e=r.a.createElement(M.b,{width:t,height:a,data:this.state.data},r.a.createElement(M.a,{type:"monotone",dataKey:"cTemp",stroke:"#ca2014",dot:!1}),r.a.createElement(M.a,{type:"monotone",dataKey:"fanSpeed",stroke:"#db5e24",dot:!1}),r.a.createElement(M.a,{type:"monotone",dataKey:"humidity",stroke:"#387d14",dot:!1}),r.a.createElement(M.a,{type:"monotone",dataKey:"humiPower",stroke:"#8884d8",dot:!1}),r.a.createElement(M.d,{dataKey:"time",type:"number",domain:[new Date(this.state.data[0].time).getTime(),new Date(this.state.data[this.state.data.length-1].time).getTime()],tickFormatter:function(e){return T()(e).format("HH:mm - MMM Do")},hide:!0}),r.a.createElement(M.e,null),r.a.createElement(M.c,{content:this.renderTooltip}))}return r.a.createElement("div",{className:"Chart-Container"},e)}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a._ismounted=!0,"-LdtfBTlG6Fgg-ADD8-b"===a.props.grow.id?(a.getLiveData=a.getLiveData("flower",a.setLiveData),a.getLiveCam=a.watchPiCam(),a._ismounted&&a.setState({growDeprecate:"flower"})):(a.getLiveData=a.getLiveData("vegger",a.setLiveData),a._ismounted&&a.setState({growDeprecate:"vegger"})),a.props.grow.urls.cam&&a._ismounted&&a.setState({camURL:a.props.grow.urls.cam})},a.componentWillUnmount=function(){a._ismounted=!1},a.watchPiCam=function(){var e=0;setInterval(function(){var t="http://96.52.249.69:300/html/cam_pic.php?time="+(++e).toString();a._ismounted&&a.setState({camURL:t})},5e3)},a.getLiveData=function(){var e=Object(E.a)(v.a.mark(function e(t,n){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("GROW BOX!"),console.log(t),e.prev=2,e.next=5,a.dbHelper.getLiveData(t,n);case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return","caught "+e.t0);case 11:case"end":return e.stop()}},e,null,[[2,7]])}));return function(t,a){return e.apply(this,arguments)}}(),a.setLiveData=function(e){a._ismounted&&a.setState({liveData:e}),a.checkActive(e.time)},a.getVeggerData=function(){a.firebase.db.ref().child("users").child("wR4QKyZ77mho1fL0FQWSMBQ170S2").child("grows").child("-LdG6gTCNZxfu1wU5Xvx").child("sensors_live").child("vegger").on("value",function(e){var t=e.val();a._ismounted&&a.setState({liveData:t}),a.checkActive(t.time)},function(e){console.log("grow box get live data failed: "+e.code)})},a.openFullCam=function(e){a.props.openFullCam(e.target.dataset.value)},a.openGrow=function(){a.props.openGrow(a.props.grow)},a.openMainPage=function(e){a.props.openMainPage(e.target.dataset.value)},a.checkActive=function(e){if(e){var t=new Date-new Date(e).getTime();a._ismounted&&(t>=12e4&&a.setState({activeIndicatorStyle:"Grow-Active-Indicator-Circle Data-Warning-Background"}),t>=24e4&&a.setState({activeIndicatorStyle:"Grow-Active-Indicator-Circle Data-Danger-Background"}),t<12e4&&a.setState({activeIndicatorStyle:"Grow-Active-Indicator-Circle Data-Optimal-Background"}))}else console.log("NO LAST UPDATE ERROR")},a.state={grow:a.props.grow,liveData:[],activeIndicatorStyle:"Grow-Active-Indicator-Circle",camURL:null,growDeprecate:"",graphElementSize:[150,150]},a.dbHelper=new w,a.graphSizeUpdated=0,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){var e=new Date;if(this.state.graphElementSize!==[this.divRef.clientWidth,this.divRef.clientHeight]&&e.getTime()-this.graphSizeUpdated>500){if(this.divRef.clientWidth-this.state.graphElementSize[0]<30)return;var t=[this.divRef.clientWidth,this.divRef.clientHeight];t!==this.state.graphElementSize&&(this._ismounted&&this.setState({graphElementSize:t}),this.graphSizeUpdated=e.getTime())}}},{key:"render",value:function(){var e=this,t=null;if(this.state.liveData){var a=new Date(this.state.liveData.time);t=T()(a).fromNow()}return r.a.createElement("div",{className:"Grow-Box-Item"},r.a.createElement("div",{className:"Grow-Box-Cam-Div"},r.a.createElement("div",{className:"Grow-Box-Cam-Full-Btn","data-value":this.props.grow.urls.cam,onClick:this.openFullCam},"\u26f6"),r.a.createElement("img",{className:"Grow-Box-Cam",alt:"cam",src:this.state.camURL,width:"100%",height:"100%",style:{objectFit:"contain",cursor:"pointer"},onClick:this.openGrow})),r.a.createElement("div",{className:"Grow-Box-Item-Main"},r.a.createElement("div",{className:"Grow-Box-Item-Header"},r.a.createElement("div",{className:"Grow-Box-Grow-Name",onClick:this.openGrow},this.props.grow.name),r.a.createElement("div",{className:"Grow-Box-Updated"},"update",r.a.createElement("i",null,r.a.createElement("b",null,": ",t)),r.a.createElement("div",{className:this.state.activeIndicatorStyle}))),r.a.createElement("div",{className:"Grow-Box-Function-Btns"},r.a.createElement("button",{className:"Grow-Box-Function-Btn","data-value":"graphs",onClick:this.openMainPage},"DATA ",r.a.createElement("span",{role:"img","aria-label":"grow data icon"},"\ud83d\udcc8")),r.a.createElement("button",{className:"Grow-Box-Function-Btn","data-value":"config",onClick:this.openMainPage},"CONFIG ",r.a.createElement("span",{role:"img","aria-label":"grow config icon"},"\ud83d\udcbb")),r.a.createElement("button",{className:"Grow-Box-Function-Btn-Feed","data-value":"feed",onClick:this.openMainPage},"FEED \u2593\u2593"),r.a.createElement("button",{className:"Grow-Box-Function-Btn-Edit-Feed","data-value":"edit-feed",onClick:this.openMainPage},"\u270e")),r.a.createElement("div",{className:"Grow-Box-Info"},r.a.createElement("div",{className:"Grow-Box-Info-Text-Area"},function(){if(e.state.liveData)return r.a.createElement(O,{liveData:e.state.liveData})}()),r.a.createElement("div",{className:"Grow-Box-Info-Graph-Area",ref:function(t){return e.divRef=t}},r.a.createElement(J,{parentSize:this.state.graphElementSize,growDeprecate:this.state.growDeprecate})))))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).saveConfig=function(){a.dbHelper.setGrowConfig({temp_min:a.state.temp_min,temp_max:a.state.temp_max,temp_hyst:a.state.temp_hyst,fan_min:a.state.fan_min,fan_max:a.state.fan_max,humidity_min:a.state.humidity_min,humidity_max:a.state.humidity_max,humidity_hyst:a.state.humidity_hyst,humidifier_min:a.state.humidifier_min,humidifier_max:a.state.humidifier_max})},a.watchGrowConfig=function(){var e=Object(E.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.dbHelper.watchGrowConfig(t);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","caught "+e.t0);case 9:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}(),a.setFetchedConfig=function(e){a.setState({temp_min:e.temp_min,temp_max:e.temp_max,temp_hyst:e.temp_hyst,fan_min:e.fan_min,fan_max:e.fan_max,humidity_min:e.humidity_min,humidity_max:e.humidity_max,humidity_hyst:e.humidity_hyst,humidifier_min:e.humidifier_min,humidifier_max:e.humidifier_max})},a.handleTempMinChange=function(e){a.setState({temp_min:e.target.value})},a.handleTempMaxChange=function(e){a.setState({temp_max:e.target.value})},a.handleTempHystChange=function(e){a.setState({temp_hyst:e.target.value})},a.handleFanMinChange=function(e){a.setState({fan_min:e.target.value})},a.handleFanMaxChange=function(e){a.setState({fan_max:e.target.value})},a.handleHumidityMinChange=function(e){a.setState({humidity_min:e.target.value})},a.handleHumidityMaxChange=function(e){a.setState({humidity_max:e.target.value})},a.handleHumidityHystChange=function(e){a.setState({humidity_hyst:e.target.value})},a.handleHumidifierMinChange=function(e){a.setState({humidifier_min:e.target.value})},a.handleHumidifierMaxChange=function(e){a.setState({humidifier_max:e.target.value})},a.state={temp_min:"",temp_max:"",temp_hyst:"",fan_min:"",fan_max:"",humidity_min:"",humidity_max:"",humidity_hyst:"",humidifier_min:"",humidifier_max:""},a.dbHelper=new w,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._ismounted=!0,this.watchConfig=this.watchGrowConfig(this.setFetchedConfig)}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"render",value:function(){return r.a.createElement("div",{id:"Grow-Details-Config-Page"},r.a.createElement("div",{id:"Grow-Details-Config-Header-Text"},"Grow Config"),r.a.createElement("div",{id:"Grow-Details-Config-Scroll"},r.a.createElement("div",{id:"Config-Temp-Field"},r.a.createElement("h2",null,"TEMPERATURE"),r.a.createElement("div",{id:"Config-Temp-Min-Max"},r.a.createElement("div",null,"Min:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"temp-min",value:this.state.temp_min,onChange:this.handleTempMinChange}),"\xb0C"),r.a.createElement("div",null,"Max:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"temp-max",value:this.state.temp_max,onChange:this.handleTempMaxChange}),"\xb0C"),r.a.createElement("div",null,"Hyst:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"temp-hyst",value:this.state.temp_hyst,onChange:this.handleTempHystChange}),"\u0394\xb0C")),r.a.createElement("h3",null,"FAN POWER"),r.a.createElement("div",{id:"Config-Fan-Min-Max"},r.a.createElement("div",null,"Min:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"fan-min",value:this.state.fan_min,onChange:this.handleFanMinChange}),"%"),r.a.createElement("div",null,"Max:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"fan-max",value:this.state.fan_max,onChange:this.handleFanMaxChange}),"%"))),r.a.createElement("div",{id:"Config-Humidity-Field"},r.a.createElement("h2",null,"HUMIDITY"),r.a.createElement("div",{id:"Config-Humidity-Min-Max"},r.a.createElement("div",null,"Min:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"humidity-min",value:this.state.humidity_min,onChange:this.handleHumidityMinChange}),"% R.H."),r.a.createElement("div",null,"Max:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"humidity-max",value:this.state.humidity_max,onChange:this.handleHumidityMaxChange}),"% R.H."),r.a.createElement("div",null,"Hyst:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"humidity-hyst",value:this.state.humidity_hyst,onChange:this.handleHumidityHystChange}),"\u0394 % R.H.")),r.a.createElement("h3",null,"HUMIDIFIER POWER"),r.a.createElement("div",{id:"Config-Humidifier-Min-Max"},r.a.createElement("div",null,"Min:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"humidifier-min",value:this.state.humidifier_min,onChange:this.handleHumidifierMinChange}),"%"),r.a.createElement("div",null,"Max:",r.a.createElement("input",{type:"number",className:"Config-Input",id:"humidifier-max",value:this.state.humidifier_max,onChange:this.handleHumidifierMaxChange}),"%"))),r.a.createElement("div",{id:"GROW-DETAILS-SAVE-CONFIG-BTN",onClick:this.saveConfig},"SAVE")))}}]),t}(n.Component),L=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).componentDidUpdate=function(){a.props.growDeprecate&&a.props.growDeprecate!==a.growDeprecate&&(console.log("GRAPH SENSORS GROW DEPRECATE (TODO: REMOVE)!"),console.log(a.props.growDeprecate),a.growDeprecate=a.props.growDeprecate,a.getData())},a.getData=Object(E.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.dbHelper.getThreeDays(a.props.growDeprecate,a.setData);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","caught "+e.t0);case 9:case"end":return e.stop()}},e,null,[[0,5]])})),a.setData=function(e){a._ismounted&&a.setState({data:e})},a.renderTooltip=function(e){var t=e.payload;if(0!==t.length){var a=T()(e.payload[0].payload.time).format("ddd - HH:mm"),n=null,i="#000",o=null,l="#000",s=null,c="#000",u=null,m="#000";return t.forEach(function(e){"cTemp"===e.dataKey&&(i=e.stroke,n=t[0].payload.cTemp),"fanSpeed"===e.dataKey&&(l=e.stroke,o=t[0].payload.fanSpeed),"humidity"===e.dataKey&&(c=e.stroke,s=t[0].payload.humidity),"humiPower"===e.dataKey&&(m=e.stroke,u=t[0].payload.humiPower)}),r.a.createElement("div",{className:"Grow-Details-Graph-Tooltip"},r.a.createElement("div",null,a),function(){if(n)return r.a.createElement("div",{className:"Grow-Details-Graph-Tooltip-Data",style:{color:i}},"TEMP: ",n,"\xb0C ")}(),function(){if(o)return r.a.createElement("div",{className:"Grow-Details-Graph-Tooltip-Data",style:{color:l}},"FAN-PWR: ",o,"% ")}(),function(){if(s)return r.a.createElement("div",{className:"Grow-Details-Graph-Tooltip-Data",style:{color:c}},"HUMID: ",s,"% RH ")}(),function(){if(u)return r.a.createElement("div",{className:"Grow-Details-Graph-Tooltip-Data",style:{color:m}},"HUM-PWR: ",u,"% ")}())}},a.state={data:[]},a.dbHelper=new w,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._ismounted=!0,this.props.growDeprecate&&this.props.growDeprecate!==this.growDeprecate&&(console.log("GRAPH SENSORS GROW DEPRECATE (TODO: REMOVE)!"),console.log(this.props.growDeprecate),this.growDeprecate=this.props.growDeprecate,this.getData())}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"render",value:function(){var e=null;if(this.state.data[0]&&this.props.parentSize){var t=Math.floor(.95*this.props.parentSize[0]),a=Math.floor(.9*this.props.parentSize[1]);e=r.a.createElement(M.b,{width:t,height:a,data:this.state.data},r.a.createElement(M.a,{type:"monotone",dataKey:"cTemp",stroke:"#ca2014",dot:!1}),r.a.createElement(M.a,{type:"monotone",dataKey:"fanSpeed",stroke:"#db5e24",dot:!1}),r.a.createElement(M.a,{type:"monotone",dataKey:"humidity",stroke:"#387d14",dot:!1}),r.a.createElement(M.a,{type:"monotone",dataKey:"humiPower",stroke:"#8884d8",dot:!1}),r.a.createElement(M.d,{dataKey:"time",type:"number",domain:[new Date(this.state.data[0].time).getTime(),new Date(this.state.data[this.state.data.length-1].time).getTime()],tickFormatter:function(e){return T()(e).format("HH:mm - MMM Do")}}),r.a.createElement(M.e,null),r.a.createElement(M.c,{content:this.renderTooltip}))}return r.a.createElement("div",{className:"Chart-Container"},e)}}]),t}(n.Component),R=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={elementSize:[],growDeprecate:null},a.graphSizeUpdated=0,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._ismounted=!0}},{key:"componentDidUpdate",value:function(){if(!1!==this._ismounted){var e=new Date;if(this.state.elementSize!==[this.divRef.clientWidth,this.divRef.clientHeight]&&e.getTime()-this.graphSizeUpdated>500){var t=[this.divRef.clientWidth,this.divRef.clientHeight];t!==this.state.elementSize&&(this.setState({elementSize:t}),this.graphSizeUpdated=e.getTime())}this.props.growDeprecate&&this.state.growDeprecate!==this.props.growDeprecate&&this.setState({growDeprecate:this.props.growDeprecate})}}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"Grow-Details-Graphs-Page",ref:function(t){return e.divRef=t}},r.a.createElement(L,{parentSize:this.state.elementSize,growDeprecate:this.props.growDeprecate}))}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).componentWillUnmount=function(){a._ismounted=!1},a.watchPiCam=function(){var e=0;setInterval(function(){var t="http://96.52.249.69:300/html/cam_pic.php?time="+(++e).toString();a._ismounted&&a.setState({camURL:t})},5e3)},a.getLiveData=function(){var e=Object(E.a)(v.a.mark(function e(t,n){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.dbHelper.getLiveData(t,n);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","caught "+e.t0);case 9:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t,a){return e.apply(this,arguments)}}(),a.setLiveData=function(e){a._ismounted&&a.setState({liveData:e})},a.getLinkedJournals=function(e,t,n){a.dbHelper.getLinkedJournals(e,t,n)},a.setLinkedJournals=function(e){a._ismounted&&a.setState({linkedJournals:e})},a.checkActive=function(e){if(e){var t=new Date-new Date(e).getTime();a._ismounted&&(t>=12e4&&a.setState({activeIndicatorStyle:"Grow-Active-Indicator-Circle Data-Warning-Background"}),t>=24e4&&a.setState({activeIndicatorStyle:"Grow-Active-Indicator-Circle Data-Danger-Background"}),t<12e4&&a.setState({activeIndicatorStyle:"Grow-Active-Indicator-Circle Data-Optimal-Background"}))}else console.log("NO LAST UPDATE ERROR")},a.openJournals=function(){console.log("GROWDETAILS OPEN JOURNALS!"),a._ismounted&&a.setState({displayBottom:"journals"})},a.openData=function(){console.log("GROWDETAILS OPEN DATA"),a._ismounted&&a.setState({displayBottom:"data"})},a.openConfig=function(){console.log("GROWDETAILS OPEN CONFIG"),a._ismounted&&a.setState({displayBottom:"config"})},a.openFeed=function(){a._ismounted&&(console.log("GROWDETAILS OPEN FEED"),a.setState({displayBottom:"feed"}))},a.openEditFeed=function(){a._ismounted&&(console.log("GROWDETAILS OPEN EDIT FEED"),a.setState({displayBottom:"edit-feed"}))},a.openFullCam=function(e){a.props.openFullCam(e.target.dataset.value)},a.openJournal=function(e){console.log("TODO: GrowDetailsPage open journal"),console.log(e),a.props.setJournalID(e.id)},a.state={displayBottom:"data",liveData:[],activeIndicatorStyle:"Grow-Active-Indicator-Circle",linkedJournals:[],camURL:null,growDeprecate:null},a.dbHelper=new w,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._ismounted=!0,"-LdtfBTlG6Fgg-ADD8-b"===this.props.grow.id?(this.getLiveData("flower",this.setLiveData),this.watchPiCam(),this._ismounted&&this.setState({growDeprecate:"flower"})):(this.getLiveData("vegger",this.setLiveData),this._ismounted&&this.setState({growDeprecate:"vegger"})),this.props.grow.urls.cam&&this._ismounted&&this.setState({camURL:this.props.grow.urls.cam}),this.getLinkedJournals(this.props.grow.id,this.props.grow.journals,this.setLinkedJournals)}},{key:"render",value:function(){var e=this,t={zIndex:"1",position:"absolute"},a={zIndex:"0",position:"absolute"},n=t,i=a,o=a,l=a,s=a;if(this.state.displayBottom)switch(this.state.displayBottom){case"journals":n=t,i=a,o=a,l=a,s=a;break;case"data":n=a,i=t,o=a,l=a,s=a;break;case"feed":n=a,i=a,o=t,l=a,s=a;break;case"edit-feed":n=a,i=a,o=a,l=t,s=a;break;case"config":n=a,i=a,o=a,l=a,s=t}var c=null;return 0!==this.state.linkedJournals.length&&(c=this.state.linkedJournals.map(function(t){return r.a.createElement("div",{key:t.id,className:"Journal-Box-Item-Container"},r.a.createElement(_,{journal:t,openJournal:e.openJournal}))})),r.a.createElement("div",{className:"Grow-Details-Page"},r.a.createElement("div",{className:"Grow-Details-Page-Content"},r.a.createElement("div",{className:"Grow-Details-Content-Cam"},r.a.createElement("div",{className:"Grow-Details-Cam-Full-Btn","data-value":this.props.grow.urls.cam,onClick:this.openFullCam},"\u26f6"),r.a.createElement("img",{alt:"cam",style:{objectFit:"contain"},src:this.state.camURL,width:"100%",height:"100%"})),r.a.createElement("div",{className:"Grow-Details-Page-Panel"},r.a.createElement("div",{className:"Grow-Details-Header"},r.a.createElement("div",{id:"Grow-Header-Text"},this.props.grow.name),r.a.createElement("div",{className:this.state.activeIndicatorStyle})),r.a.createElement("div",{id:"Grow-Details-Data-Display"},function(){if(e.state.liveData)return r.a.createElement(O,{liveData:e.state.liveData})}())),r.a.createElement("div",{className:"Grow-Details-Content-Bottom"},r.a.createElement("div",{className:"Grow-Details-Bottom-Item",style:n},r.a.createElement("div",{className:"Grow-Details-Journals"},r.a.createElement("div",{className:"Grow-Details-Bottom-Btns"},r.a.createElement("button",{className:"Grow-Box-Function-Btn","data-value":"data",onClick:this.openData},"DATA ",r.a.createElement("span",{role:"img","aria-label":"grow data icon"},"\ud83d\udcc8")),r.a.createElement("button",{className:"Grow-Box-Function-Btn","data-value":"journals",onClick:this.openJournals},"JRNLS ",r.a.createElement("span",{role:"img","aria-label":"journal"},"\ud83d\udcd6")),r.a.createElement("button",{className:"Grow-Box-Function-Btn","data-value":"config",onClick:this.openConfig},"CNFG ",r.a.createElement("span",{role:"img","aria-label":"grow config icon"},"\ud83d\udcbb")),r.a.createElement("button",{className:"Grow-Box-Function-Btn-Feed","data-value":"feed",onClick:this.openFeed},"FEED \u2593\u2593"),r.a.createElement("button",{className:"Grow-Box-Function-Btn-Edit-Feed","data-value":"edit-feed",onClick:this.openEditFeed},"\u270e")),r.a.createElement("div",{className:"Grow-Details-Journals-Header"},"Connected Journals"),c)),r.a.createElement("div",{className:"Grow-Details-Bottom-Item",style:i},r.a.createElement("div",{className:"Grow-Details-Bottom-Btns"},r.a.createElement("button",{className:"Grow-Box-Function-Btn","data-value":"data",onClick:this.openData},"DATA ",r.a.createElement("span",{role:"img","aria-label":"grow data icon"},"\ud83d\udcc8")),r.a.createElement("button",{className:"Grow-Box-Function-Btn","data-value":"journals",onClick:this.openJournals},"JRNLS ",r.a.createElement("span",{role:"img","aria-label":"journal"},"\ud83d\udcd6")),r.a.createElement("button",{className:"Grow-Box-Function-Btn","data-value":"config",onClick:this.openConfig},"CNFG ",r.a.createElement("span",{role:"img","aria-label":"grow config icon"},"\ud83d\udcbb")),r.a.createElement("button",{className:"Grow-Box-Function-Btn-Feed","data-value":"feed",onClick:this.openFeed},"FEED \u2593\u2593"),r.a.createElement("button",{className:"Grow-Box-Function-Btn-Edit-Feed","data-value":"edit-feed",onClick:this.openEditFeed},"\u270e")),r.a.createElement(R,{growDeprecate:this.state.growDeprecate})),r.a.createElement("div",{className:"Grow-Details-Bottom-Item",style:o},r.a.createElement("div",{className:"Grow-Details-Bottom-Btns"},r.a.createElement("button",{className:"Grow-Box-Function-Btn","data-value":"data",onClick:this.openData},"DATA ",r.a.createElement("span",{role:"img","aria-label":"grow data icon"},"\ud83d\udcc8")),r.a.createElement("button",{className:"Grow-Box-Function-Btn","data-value":"journals",onClick:this.openJournals},"JRNLS ",r.a.createElement("span",{role:"img","aria-label":"journal"},"\ud83d\udcd6")),r.a.createElement("button",{className:"Grow-Box-Function-Btn","data-value":"config",onClick:this.openConfig},"CNFG ",r.a.createElement("span",{role:"img","aria-label":"grow config icon"},"\ud83d\udcbb")),r.a.createElement("button",{className:"Grow-Box-Function-Btn-Feed","data-value":"feed",onClick:this.openFeed},"FEED \u2593\u2593"),r.a.createElement("button",{className:"Grow-Box-Function-Btn-Edit-Feed","data-value":"edit-feed",onClick:this.openEditFeed},"\u270e")),r.a.createElement("iframe",{id:"Food-Chart",title:"FoodChart",src:this.props.grow.urls.feed_chart})),r.a.createElement("div",{className:"Grow-Details-Bottom-Item",style:l},r.a.createElement("div",{className:"Grow-Details-Bottom-Btns"},r.a.createElement("button",{className:"Grow-Box-Function-Btn","data-value":"data",onClick:this.openData},"DATA ",r.a.createElement("span",{role:"img","aria-label":"grow data icon"},"\ud83d\udcc8")),r.a.createElement("button",{className:"Grow-Box-Function-Btn","data-value":"journals",onClick:this.openJournals},"JRNLS ",r.a.createElement("span",{role:"img","aria-label":"journal"},"\ud83d\udcd6")),r.a.createElement("button",{className:"Grow-Box-Function-Btn","data-value":"config",onClick:this.openConfig},"CNFG ",r.a.createElement("span",{role:"img","aria-label":"grow config icon"},"\ud83d\udcbb")),r.a.createElement("button",{className:"Grow-Box-Function-Btn-Feed","data-value":"feed",onClick:this.openFeed},"FEED \u2593\u2593"),r.a.createElement("button",{className:"Grow-Box-Function-Btn-Edit-Feed","data-value":"edit-feed",onClick:this.openEditFeed},"\u270e")),r.a.createElement("object",{id:"Edit-Food-Chart",type:"text/html",data:this.props.grow.urls.feed_edit,width:"100%",height:"100%","aria-label":"edit food chart"})),r.a.createElement("div",{className:"Grow-Details-Bottom-Item",style:s},r.a.createElement("div",{className:"Grow-Details-Bottom-Btns"},r.a.createElement("button",{className:"Grow-Box-Function-Btn","data-value":"data",onClick:this.openData},"DATA ",r.a.createElement("span",{role:"img","aria-label":"grow data icon"},"\ud83d\udcc8")),r.a.createElement("button",{className:"Grow-Box-Function-Btn","data-value":"journals",onClick:this.openJournals},"JRNLS ",r.a.createElement("span",{role:"img","aria-label":"journal"},"\ud83d\udcd6")),r.a.createElement("button",{className:"Grow-Box-Function-Btn","data-value":"config",onClick:this.openConfig},"CNFG ",r.a.createElement("span",{role:"img","aria-label":"grow config icon"},"\ud83d\udcbb")),r.a.createElement("button",{className:"Grow-Box-Function-Btn-Feed","data-value":"feed",onClick:this.openFeed},"FEED \u2593\u2593"),r.a.createElement("button",{className:"Grow-Box-Function-Btn-Edit-Feed","data-value":"edit-feed",onClick:this.openEditFeed},"\u270e")),r.a.createElement(A,null)))))}}]),t}(n.Component),U=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).closeCam=function(){a.props.closeFullCam()},a.state={},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.props.camURL&&(console.log("GrowCamFull Cam URL"),console.log(this.props.camURL)),r.a.createElement("div",{id:"Grow-Cam-Full"},r.a.createElement("div",{className:"Grow-Cam-Full-Exit-Btn",onClick:this.closeCam},"X"),"http://96.52.249.69:300/html/cam_pic.php?time=0"===e.props.camURL?r.a.createElement("object",{type:"text/html",data:"http://96.52.249.69:300/html/",width:"100%",height:"100%","aria-label":"live cam"}):r.a.createElement("img",{alt:"cam",style:{objectFit:"contain"},src:e.props.camURL,width:"100%",height:"100%"}))}}]),t}(n.Component),W=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).componentDidUpdate=function(){a._ismounted},a.closeModal=function(e){a.setState({displayContent:"main"})},a.openMainPage=function(e){a.props.openMainPage(e)},a.openCreateGrowModal=function(){alert("GrowPage.js openCreateGrowModal() TODO")},a.openGrow=function(e){e||a.props.setGrow(null),a.props.setGrow(e)},a.openFullCam=function(e){a.setState({displayContent:"full-cam",camURL:e})},a.closeFullCam=function(){a.setState({displayContent:"main",camURL:null})},a.setJournalID=function(e){console.log("GROW PAGE!"),console.log(e),a.props.setJournalID(e)},a.state={displayContent:"main",grow:a.props.grow,camURL:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._ismounted=!0}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"render",value:function(){var e=this;console.log("logisippi"),console.log(this.props.userGrows),console.log(this.props.growID),this.props.growID&&this.props.userGrows.forEach(function(t){t.id===e.props.growID&&e.props.setGrow(t)});var t=null;return null===this.props.grow&&this.props.userGrows&&(t=this.props.userGrows.map(function(t){return r.a.createElement("div",{key:t.id,className:"Grow-Box-Item-Container"},r.a.createElement(H,{grow:t,openGrow:e.openGrow,openFullCam:e.openFullCam,openMainPage:e.openMainPage}))})),r.a.createElement("div",{id:"Grow-Page"},r.a.createElement("div",{id:"Grow-Main"},r.a.createElement("div",{id:"Grow-Main-Area"},function(){if(null===e.props.grow)return r.a.createElement("div",{id:"Grow-List-Main-Area"},t?r.a.createElement("div",{id:"Grow-Box-Area-Scroll"},r.a.createElement("div",{id:"Grow-Header-Area"},r.a.createElement("div",{id:"Grow-Header-Text"},"Grows"),r.a.createElement("button",{className:"New-Grow-Btn",onClick:e.openCreateGrowModal},"+")),r.a.createElement("div",{id:"Grow-Box-Area"},t)):r.a.createElement("div",{id:"Grow-Header-Area"},r.a.createElement("div",{id:"Grow-Header-Text"},"Grows"),r.a.createElement("button",{className:"New-Grow-Btn",onClick:e.openCreateGrowModal},"+")))}(),function(){if(e.props.grow)return r.a.createElement(P,{grow:e.props.grow,openFullCam:e.openFullCam,openMainPage:e.openMainPage,setJournalID:e.setJournalID})}())),function(){if("full-cam"===e.state.displayContent)return r.a.createElement(U,{closeFullCam:e.closeFullCam,camURL:e.state.camURL})}())}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).componentDidUpdate=function(){a.props.growDeprecate&&a.props.growDeprecate!==a.growDeprecate&&(a.growDeprecate=a.props.growDeprecate,a.getData())},a.getData=Object(E.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.dbHelper.getThreeDays(a.props.growDeprecate,a.setData);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","caught "+e.t0);case 9:case"end":return e.stop()}},e,null,[[0,5]])})),a.setData=function(e){a._ismounted&&a.setState({data:e})},a.renderTooltip=function(e){var t=e.payload;if(0!==t.length){var a=T()(e.payload[0].payload.time).format("ddd - HH:mm"),n=null,i="#000",o=null,l="#000",s=null,c="#000",u=null,m="#000";return t.forEach(function(e){"cTemp"===e.dataKey&&(i=e.stroke,n=t[0].payload.cTemp),"fanSpeed"===e.dataKey&&(l=e.stroke,o=t[0].payload.fanSpeed),"humidity"===e.dataKey&&(c=e.stroke,s=t[0].payload.humidity),"humiPower"===e.dataKey&&(m=e.stroke,u=t[0].payload.humiPower)}),r.a.createElement("div",{className:"Grow-Details-Graph-Tooltip"},r.a.createElement("div",null,a),function(){if(n)return r.a.createElement("div",{className:"Grow-Details-Graph-Tooltip-Data",style:{color:i}},"TEMP: ",n,"\xb0C ")}(),function(){if(o)return r.a.createElement("div",{className:"Grow-Details-Graph-Tooltip-Data",style:{color:l}},"FAN-PWR: ",o,"% ")}(),function(){if(s)return r.a.createElement("div",{className:"Grow-Details-Graph-Tooltip-Data",style:{color:c}},"HUMID: ",s,"% RH ")}(),function(){if(u)return r.a.createElement("div",{className:"Grow-Details-Graph-Tooltip-Data",style:{color:m}},"HUM-PWR: ",u,"% ")}())}},a.state={data:[]},a.dbHelper=new w,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._ismounted=!0,this.props.growDeprecate&&this.props.growDeprecate!==this.growDeprecate&&(this.growDeprecate=this.props.growDeprecate,this.getData())}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"render",value:function(){var e=null;if(this.state.data&&this.state.data[0]&&this.props.parentSize){var t=Math.floor(.95*this.props.parentSize[0]),a=Math.floor(.9*this.props.parentSize[1]);console.log("WOW GraphSensorsTest graph size:"),console.log(t+", "+a),console.log("WOW GraphSensorsTest datalength at render:"),console.log(this.state.data.length),e=r.a.createElement(M.b,{width:t,height:a,data:this.state.data},r.a.createElement(M.a,{type:"monotone",dataKey:"cTemp",stroke:"#ca2014",dot:!1}),r.a.createElement(M.a,{type:"monotone",dataKey:"fanSpeed",stroke:"#db5e24",dot:!1}),r.a.createElement(M.a,{type:"monotone",dataKey:"humidity",stroke:"#387d14",dot:!1}),r.a.createElement(M.a,{type:"monotone",dataKey:"humiPower",stroke:"#8884d8",dot:!1}),r.a.createElement(M.d,{dataKey:"time",type:"number",domain:[new Date(this.state.data[0].time).getTime(),new Date(this.state.data[this.state.data.length-1].time).getTime()],tickFormatter:function(e){return T()(e).format("HH:mm - MMM Do")}}),r.a.createElement(M.e,null),r.a.createElement(M.c,{content:this.renderTooltip}))}return r.a.createElement("div",{className:"Chart-Container"},e)}}]),t}(n.Component),K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={elementSize:[800,400],growDeprecate:null},a.graphSizeUpdated=0,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._ismounted=!0}},{key:"componentDidUpdate",value:function(){if(!1!==this._ismounted){var e=new Date;if(this.state.elementSize!==[this.divRef.clientWidth,this.divRef.clientHeight]&&e.getTime()-this.graphSizeUpdated>500){var t=[this.divRef.clientWidth,this.divRef.clientHeight];t!==this.state.elementSize&&(this.setState({elementSize:t}),this.graphSizeUpdated=e.getTime())}this.props.growDeprecate&&this.state.growDeprecate!==this.props.growDeprecate&&this.setState({growDeprecate:this.props.growDeprecate})}}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"Grow-Details-Graphs-Page",ref:function(t){return e.divRef=t}},r.a.createElement(z,{parentSize:this.state.elementSize,growDeprecate:this.props.growDeprecate}))}}]),t}(n.Component),Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).openJournals=function(){a.props.setMainContent("journals")},a.openGrows=function(){a.props.setMainContent("grows")},a.openGanjaGrove=function(){a.props.openGanjaGrove()},a.openVegger=function(){a.props.openVegger()},a.handleSignOut=function(){a.firebase.auth.signOut().then(function(){console.log("signed out"),window.location.reload()}).catch(function(e){console.log("Error signing out: ".concat(e))})},a.state={},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"App-Bar"},r.a.createElement("div",{id:"App-Bar-Logo",onClick:this.openGrows},"grovv"),r.a.createElement("div",{className:"App-Bar-Button",onClick:this.openJournals},"JRNLS"),r.a.createElement("div",{className:"App-Bar-Button",onClick:this.openGrows},"GROWS"),function(){if(e.props.liveGrowData.flower)return r.a.createElement("div",{className:"App-Bar-Button-Grow",onClick:e.openGanjaGrove},r.a.createElement("div",{className:"App-Bar-Button-Grow-Name"},"GG"),r.a.createElement("div",{ref:e.flowerTempRef,className:"App-Bar-Button-Grow-Temp"},Math.round(10*e.props.liveGrowData.flower.cTemp)/10,"\xb0C"),r.a.createElement("div",{ref:e.flowerHumidityRef,className:"App-Bar-Button-Grow-Humidity"},Math.round(10*e.props.liveGrowData.flower.humidity)/10,"%"))}(),function(){if(e.props.liveGrowData.vegger)return r.a.createElement("div",{className:"App-Bar-Button-Grow",onClick:e.openVegger},r.a.createElement("div",{className:"App-Bar-Button-Grow-Name"},"VG"),r.a.createElement("div",{ref:e.veggerTempRef,className:"App-Bar-Button-Grow-Temp"},Math.round(10*e.props.liveGrowData.vegger.cTemp)/10,"\xb0C"),r.a.createElement("div",{ref:e.veggerHumidityRef,className:"App-Bar-Button-Grow-Humidity"},Math.round(10*e.props.liveGrowData.vegger.humidity)/10,"%"))}(),r.a.createElement("div",{className:"App-Bar-Filler-Div"}),r.a.createElement("div",{className:"App-Bar-Logout-Button",onClick:this.handleSignOut},"\u27b2"))}}]),t}(n.Component),V=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).setUserGrows=function(e){console.log("USER GROWS IN APP.JS!"),console.log(e),a.setState({userGrows:e}),a.dbHelper.getLiveGrowDatas(e,a.setLiveGrowDatas)},a.setUserJournals=function(e){console.log("USER JOURNALS IN APP.JS!"),console.log(e),a.setState({userJournals:e})},a.setLiveGrowDatas=function(e,t){console.log("LIVE DATA IN APP.JS!"),console.log(e),console.log(t),console.log("STATE LIVE DATA"),console.log(a.state.liveGrowData);var n=a.state.liveGrowData;n[e]=t,a.setState({liveGrowDatas:n})},a.getUsername=function(){a.firebase.db.ref().child("users").child(a.state.UID).on("value",function(e){a.setState({username:e.val().username})},function(e){console.log("The username read failed: "+e.code)})},a.getUrls=function(){a.firebase.db.ref().child("users").child(a.state.UID).child("urls").on("value",function(e){a.setState({URL_livecam:e.val().livecam,URL_vegger_livecam:e.val().vegger_livecam,urls:e.val()})},function(e){console.log("The url read failed: "+e.code)})},a.handleSignOut=function(){a.setState({UID:null,URL_livecam:null}),a.firebase.auth.signOut().then(function(){console.log("signed out")}).catch(function(e){console.log("Error signing out: ".concat(e))})},a.setMainContent=function(e){a.setState({mainContent:e,currentGrow:null,growID:null,journalID:null})},a.openGanjaGrove=function(){a.setState({mainContent:"grows",currentGrow:null,growID:"-LdtfBTlG6Fgg-ADD8-b"})},a.openVegger=function(){a.setState({mainContent:"grows",currentGrow:null,growID:"-LdtkOvSXRrm1zIZ6EOx"})},a.openChart=function(){"chart"!==a.state.mainContent&&a.setState({mainContent:"chart"})},a.editChart=function(){window.open("https://docs.google.com/spreadsheets/d/1i7EDfBIwj4eYU2LxyS02YwDDeNROcdgXjROKfzCtp60/edit?usp=sharing","sharer","toolbar=0,status=0,width=548,height=325")},a.openConfig=function(){"config"!==a.state.mainContent&&a.setState({mainContent:"config"})},a.openJournals=function(){"journals"!==a.state.mainContent?a.setState({mainContent:"journals",journalID:null}):a.setState({journalID:null})},a.openGrows=function(){"grows"!==a.state.mainContent?a.setState({mainContent:"grows",currentGrow:null}):a.setState({currentGrow:null})},a.setGrow=function(e){console.log("APP Setgrow"),console.log(e),a.setState({growID:null,currentGrow:e})},a.setJournalID=function(e){console.log("APP SetJournalID"),console.log(e),a.setState({mainContent:"journals",journalID:e})},a.openMainPageFromExternal=function(e){switch(console.log("todo: get rid of this system..."),console.log(e),e){case"config":a.openConfig();break;case"feed":a.openChart();break;case"edit-feed":a.editChart();break;case"graphs":default:a.openGraphs()}},a.openGraphs=function(){a.setState({mainContent:"graphs"})},a.state={mainContent:"signin",UID:null,username:"",URL_livecam:null,URL_vegger_livecam:null,journalID:null,currentGrow:null,growID:null,userGrows:[],userJournals:[],liveGrowData:[]},a.dbHelper=new w,a.firebase=new g,a.firebase.auth.onAuthStateChanged(function(e){e&&(a.setState({UID:e.uid}),a.getUrls(),a.getUsername(),a.dbHelper.getUserGrows(a.setUserGrows),a.dbHelper.getUserJournals(a.setUserJournals))}),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-body"},function(){if(e.state.UID)return r.a.createElement(Q,{mainContent:e.state.mainContent,openGanjaGrove:e.openGanjaGrove,openVegger:e.openVegger,setMainContent:e.setMainContent,liveGrowData:e.state.liveGrowData})}(),r.a.createElement("div",{id:"App-Inner-Body"},r.a.createElement("div",{id:"App-Body-Content"},function(){if(e.state.UID)switch(e.state.mainContent){case"journals":return r.a.createElement(B,{setJournalID:e.setJournalID,journalID:e.state.journalID,userJournals:e.state.userJournals});case"grows":return r.a.createElement(W,{openMainPage:e.openMainPageFromExternal,setJournalID:e.setJournalID,setGrow:e.setGrow,grow:e.state.currentGrow,growID:e.state.growID,userGrows:e.state.userGrows});case"chart":return r.a.createElement(b,null);case"config":return r.a.createElement(C,null);case"graphs":return r.a.createElement("div",{className:"Chart-Page"},"flower 3 day",r.a.createElement(K,{growDeprecate:"flower"}),"vegger 3 day",r.a.createElement(K,{growDeprecate:"vegger"}));default:return r.a.createElement(W,{openMainPage:e.openMainPageFromExternal,setJournalID:e.setJournalID,setGrow:e.setGrow,grow:e.state.currentGrow,growID:e.state.growID,userGrows:e.state.userGrows})}else switch(e.state.mainContent){case"signin":return r.a.createElement(D,{gotoSignUp:e.setMainContent});case"signup":return r.a.createElement(y,{gotoSignIn:e.setMainContent});default:return r.a.createElement(D,{gotoSignUp:e.setMainContent})}}()))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[225,1,2]]]);
//# sourceMappingURL=main.19de60e2.chunk.js.map